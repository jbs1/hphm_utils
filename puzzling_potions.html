<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HPHM Utils</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
	<link rel="shortcut icon" href="favicon.ico">

	<script type="text/javascript">
		var currentNavbarId = "puzzling_potions";
	</script>
	<style type="text/css">
		table[id^="potions-table-"] td {
			width: 3.25rem;
			height: 3.25rem;
		}
		img.tabimg {
			max-height: 3rem;
		}
	</style>
</head>
<body>
	<nav class="navbar navbar-expand-sm bg-body-secondary" id="navbar">
	</nav>


	
	<div class="container text-center">


		<div class="row pt-3">
			<!-- Nav tabs -->
			<ul class="nav nav-pills nav-fill" id="myTab" role="tablist">
				<li class="nav-item" role="presentation">
					<button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#1" type="button" role="tab" aria-controls="first" aria-selected="true"><img src="img/1.svg" class="img-fluid tabimg"></button>
				</li>
				<li class="nav-item" role="presentation">
					<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#2" type="button" role="tab" aria-controls="second" aria-selected="false"><img src="img/2.svg" class="img-fluid tabimg"></button>
				</li>
				<li class="nav-item" role="presentation">
					<button class="nav-link" id="messages-tab" data-bs-toggle="tab" data-bs-target="#3" type="button" role="tab" aria-controls="third" aria-selected="false"><img src="img/3.svg" class="img-fluid tabimg"></button>
				</li>
				<li class="nav-item" role="presentation">
					<button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#4" type="button" role="tab" aria-controls="forth" aria-selected="false"><img src="img/4.svg" class="img-fluid tabimg"></button>
				</li>
			</ul>

			<!-- Tab panes -->
			<div class="tab-content py-3">
				<div class="tab-pane active" id="1" role="tabpanel" aria-labelledby="first-tab" tabindex="0">
					<table class="table table-bordered w-auto m-auto border-black bg-secondary-subtle" id="potions-table-1">
						<tbody>
							<tr>
								<td id="111"></td>
								<td id="112"></td>
								<td id="113"></td>
								<td id="114"></td>
								<td id="115"></td>
								<td id="116"></td>
								<td id="117"></td>
								<td id="118"></td>
							</tr>
							<tr>
								<td id="121"></td>
								<td id="122"></td>
								<td id="123"></td>
								<td id="124"></td>
								<td id="125"></td>
								<td id="126"></td>
								<td id="127"></td>
								<td id="128"></td>
							</tr>
							<tr>
								<td id="131"></td>
								<td id="132"></td>
								<td id="133"></td>
								<td id="134"></td>
								<td id="135"></td>
								<td id="136"></td>
								<td id="137"></td>
								<td id="138"></td>
							</tr>
							<tr>
								<td id="141"></td>
								<td id="142"></td>
								<td id="143"></td>
								<td id="144"></td>
								<td id="145"></td>
								<td id="146"></td>
								<td id="147"></td>
								<td id="148"></td>
							</tr>
							<tr>
								<td id="151"></td>
								<td id="152"></td>
								<td id="153"></td>
								<td id="154"></td>
								<td id="155"></td>
								<td id="156"></td>
								<td id="157"></td>
								<td id="158"></td>
							</tr>
							<tr>
								<td id="161"></td>
								<td id="162"></td>
								<td id="163"></td>
								<td id="164"></td>
								<td id="165"></td>
								<td id="166"></td>
								<td id="167"></td>
								<td id="168"></td>
							</tr>
							<tr>
								<td id="171"></td>
								<td id="172"></td>
								<td id="173"></td>
								<td id="174"></td>
								<td id="175"></td>
								<td id="176"></td>
								<td id="177"></td>
								<td id="178"></td>
							</tr>
						</tbody>
					</table>					
				</div>
				<div class="tab-pane" id="2" role="tabpanel" aria-labelledby="second-tab" tabindex="0">
					<table class="table table-bordered w-auto m-auto border-black bg-secondary-subtle" id="potions-table-2">
						<tbody>
							<tr>
								<td id="211"></td>
								<td id="212"></td>
								<td id="213"></td>
								<td id="214"></td>
								<td id="215"></td>
								<td id="216"></td>
								<td id="217"></td>
								<td id="218"></td>
							</tr>
							<tr>
								<td id="221"></td>
								<td id="222"></td>
								<td id="223"></td>
								<td id="224"></td>
								<td id="225"></td>
								<td id="226"></td>
								<td id="227"></td>
								<td id="228"></td>
							</tr>
							<tr>
								<td id="231"></td>
								<td id="232"></td>
								<td id="233"></td>
								<td id="234"></td>
								<td id="235"></td>
								<td id="236"></td>
								<td id="237"></td>
								<td id="238"></td>
							</tr>
							<tr>
								<td id="241"></td>
								<td id="242"></td>
								<td id="243"></td>
								<td id="244"></td>
								<td id="245"></td>
								<td id="246"></td>
								<td id="247"></td>
								<td id="248"></td>
							</tr>
							<tr>
								<td id="251"></td>
								<td id="252"></td>
								<td id="253"></td>
								<td id="254"></td>
								<td id="255"></td>
								<td id="256"></td>
								<td id="257"></td>
								<td id="258"></td>
							</tr>
							<tr>
								<td id="261"></td>
								<td id="262"></td>
								<td id="263"></td>
								<td id="264"></td>
								<td id="265"></td>
								<td id="266"></td>
								<td id="267"></td>
								<td id="268"></td>
							</tr>
							<tr>
								<td id="271"></td>
								<td id="272"></td>
								<td id="273"></td>
								<td id="274"></td>
								<td id="275"></td>
								<td id="276"></td>
								<td id="277"></td>
								<td id="278"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="tab-pane" id="3" role="tabpanel" aria-labelledby="third-tab" tabindex="0">
					<table class="table table-bordered w-auto m-auto border-black bg-secondary-subtle" id="potions-table-3">
						<tbody>
							<tr>
								<td id="311"></td>
								<td id="312"></td>
								<td id="313"></td>
								<td id="314"></td>
								<td id="315"></td>
								<td id="316"></td>
								<td id="317"></td>
								<td id="318"></td>
							</tr>
							<tr>
								<td id="321"></td>
								<td id="322"></td>
								<td id="323"></td>
								<td id="324"></td>
								<td id="325"></td>
								<td id="326"></td>
								<td id="327"></td>
								<td id="328"></td>
							</tr>
							<tr>
								<td id="331"></td>
								<td id="332"></td>
								<td id="333"></td>
								<td id="334"></td>
								<td id="335"></td>
								<td id="336"></td>
								<td id="337"></td>
								<td id="338"></td>
							</tr>
							<tr>
								<td id="341"></td>
								<td id="342"></td>
								<td id="343"></td>
								<td id="344"></td>
								<td id="345"></td>
								<td id="346"></td>
								<td id="347"></td>
								<td id="348"></td>
							</tr>
							<tr>
								<td id="351"></td>
								<td id="352"></td>
								<td id="353"></td>
								<td id="354"></td>
								<td id="355"></td>
								<td id="356"></td>
								<td id="357"></td>
								<td id="358"></td>
							</tr>
							<tr>
								<td id="361"></td>
								<td id="362"></td>
								<td id="363"></td>
								<td id="364"></td>
								<td id="365"></td>
								<td id="366"></td>
								<td id="367"></td>
								<td id="368"></td>
							</tr>
							<tr>
								<td id="371"></td>
								<td id="372"></td>
								<td id="373"></td>
								<td id="374"></td>
								<td id="375"></td>
								<td id="376"></td>
								<td id="377"></td>
								<td id="378"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="tab-pane" id="4" role="tabpanel" aria-labelledby="forth-tab" tabindex="0">
					<table class="table table-bordered w-auto m-auto border-black bg-secondary-subtle" id="potions-table-4">
						<tbody>
							<tr>
								<td id="411"></td>
								<td id="412"></td>
								<td id="413"></td>
								<td id="414"></td>
								<td id="415"></td>
								<td id="416"></td>
								<td id="417"></td>
								<td id="418"></td>
							</tr>
							<tr>
								<td id="421"></td>
								<td id="422"></td>
								<td id="423"></td>
								<td id="424"></td>
								<td id="425"></td>
								<td id="426"></td>
								<td id="427"></td>
								<td id="428"></td>
							</tr>
							<tr>
								<td id="431"></td>
								<td id="432"></td>
								<td id="433"></td>
								<td id="434"></td>
								<td id="435"></td>
								<td id="436"></td>
								<td id="437"></td>
								<td id="438"></td>
							</tr>
							<tr>
								<td id="441"></td>
								<td id="442"></td>
								<td id="443"></td>
								<td id="444"></td>
								<td id="445"></td>
								<td id="446"></td>
								<td id="447"></td>
								<td id="448"></td>
							</tr>
							<tr>
								<td id="451"></td>
								<td id="452"></td>
								<td id="453"></td>
								<td id="454"></td>
								<td id="455"></td>
								<td id="456"></td>
								<td id="457"></td>
								<td id="458"></td>
							</tr>
							<tr>
								<td id="461"></td>
								<td id="462"></td>
								<td id="463"></td>
								<td id="464"></td>
								<td id="465"></td>
								<td id="466"></td>
								<td id="467"></td>
								<td id="468"></td>
							</tr>
							<tr>
								<td id="471"></td>
								<td id="472"></td>
								<td id="473"></td>
								<td id="474"></td>
								<td id="475"></td>
								<td id="476"></td>
								<td id="477"></td>
								<td id="478"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<div class="row pb-3">
			<div class="col">
				<a href="https://drive.google.com/file/d/1sYZ4ajDft48MqegFSunUlAaVfRYQxqSk/view" class="link-primary" target="_blank">Potion Ingredients Grid</a>
			</div>
		</div>

		<div class="row pb-5">
			<div class="col">
				You can now cycle between <span class="text-warning fw-bold">yellow</span> and <span class="text-success fw-bold">green</span>.<br>
				<span class="text-warning fw-bold">Yellow</span> stands for <span class="fw-bold text-decoration-underline">non-required</span> ingredients and <span class="text-success fw-bold">green</span> stands for <span class="fw-bold text-decoration-underline">required</span> ingredients.
			</div>
		</div>

		<div class="row pb-3">
			<div class="col">
				<button type="button" class="btn btn-danger" onclick="prugeSelection()">Clear all Grids!</button>
			</div>
		</div>
	</div>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
	<script type="text/javascript">
		addEventListener("DOMContentLoaded", (event) => {
			fetch("navbar.html").then((navbarResponse) => {
				return navbarResponse.text();
			}).then((navbarHtml) => {
				let navbarWrapper = document.getElementById("navbar");
				navbarWrapper.innerHTML = navbarHtml;
			}).finally(() => {
				let currentNavbar = document.querySelector("a#"+currentNavbarId);
				currentNavbar.classList.add("active");
				currentNavbar.setAttribute("aria-current", "page");
			});
		});
	</script>

	<script type="text/javascript">
		function prugeExpiredData () {
			const localStorage = window.localStorage;

			const lastActivity = parseInt(localStorage.getItem("lastActivity"),10);

			if(!isNaN(lastActivity)) {
				let lastActivityDate = new Date(lastActivity);
				let currentDate = new Date();
				if(currentDate-lastActivityDate > 7*24*60*60*1000) {
					prugeSelection();
				}
			}
			localStorage.setItem("lastActivity",Date.now());
		}

		function prugeSelection () {
			const localStorage = window.localStorage;
			localStorage.clear();

			const tdobject = document.querySelectorAll('table[id^="potions-table-"] td');
			for (let i = 0; i < tdobject.length; i++) {
				tdobject[i].classList.toggle("bg-warning", false);
				tdobject[i].classList.toggle("bg-success", false);
			}
		}

		function cycleTdSelect (obj) {
			/*
				Each element has own key.
				value
				null OR 0 ==> no selection
				1 ==> non-req / yellow
				2 ==> req / green
			*/
			const localStorage = window.localStorage;
			const classes = obj.classList;
			const warn = classes.contains("bg-warning");
			const succ = classes.contains("bg-success");

			if (!warn && !succ) {
				let nonReq = classes.toggle("bg-warning", true);
				let req = classes.toggle("bg-success", false);
				localStorage.setItem(obj.id,"1");
			} else if (warn && !succ) {
				let nonReq = classes.toggle("bg-warning", false);
				let req = classes.toggle("bg-success", true);
				localStorage.setItem(obj.id,"2");
			} else if (!warn && succ) {
				let nonReq = classes.toggle("bg-warning", false);
				let req = classes.toggle("bg-success", false);
				localStorage.setItem(obj.id,"0");
			} else {
				let nonReq = classes.toggle("bg-warning", false);
				let req = classes.toggle("bg-success", false);
				localStorage.setItem(obj.id,"0");
			}
		}

		const tdobject = document.querySelectorAll('table[id^="potions-table-"] td');
		for (let i = 0; i < tdobject.length; i++) {
			tdobject[i].addEventListener(
			"click",
			function (event) {
				localStorage.setItem("lastActivity",Date.now());
				cycleTdSelect(event.target);
			}, false);
		}
	</script>

	<script type="text/javascript">
		addEventListener("DOMContentLoaded", (event) => {
			prugeExpiredData();

			const localStorage = window.localStorage;

			const tdobject = document.querySelectorAll('table[id^="potions-table-"] td');
			for (let i = 0; i < tdobject.length; i++) {
				switch (localStorage.getItem(tdobject[i].id)) {
					case null:
					case "0":
						break;
					case "1":
						tdobject[i].classList.toggle("bg-warning", true);
						break;
					case "2":
						tdobject[i].classList.toggle("bg-success", true);
						break;
				}
			}
		});
	</script>

</body>
</html>
